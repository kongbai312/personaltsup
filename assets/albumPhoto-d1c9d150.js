import{ad as Y,I as G,X as S,l as b,J,aU as W,aw as X,d as j,N as y,w as R,v as T,s as z,B as Z,T as Q,F as w,af as ee,O as M,ag as x,E as V,W as U,a2 as te,aV as oe,a0 as le,k as $,o as ne,b as C,c as L,f as _,e as O,i as se,P as ae,a1 as re,A as ie}from"./index-ae23ef46.js";import{E as ce}from"./el-card-35757019.js";import{_ as ue}from"./pr_headerImg-2227746a.js";import{j as de}from"./index-d1312783.js";import{a as fe}from"./use-global-config-8f2efcff.js";import{a as ve,b as me}from"./scroll-fd71bb0b.js";import{t as H}from"./throttle-bde9afc3.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-0d833cd1.js";import"./isObject-5520b7e1.js";import"./index-b9d7366f.js";const g="ElInfiniteScroll",be=50,pe=200,_e=0,he={delay:{type:Number,default:pe},distance:{type:Number,default:_e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},B=(e,t)=>Object.entries(he).reduce((o,[l,a])=>{var s,r;const{type:u,default:d}=a,i=e.getAttribute(`infinite-scroll-${l}`);let c=(r=(s=t[i])!=null?s:i)!=null?r:d;return c=c==="false"?!1:c,c=u(c),o[l]=Number.isNaN(c)?d:c,o},{}),q=e=>{const{observer:t}=e[g];t&&(t.disconnect(),delete e[g].observer)},ye=(e,t)=>{const{container:o,containerEl:l,instance:a,observer:s,lastScrollTop:r}=e[g],{disabled:u,distance:d}=B(e,a),{clientHeight:i,scrollHeight:c,scrollTop:v}=l,n=v-r;if(e[g].lastScrollTop=v,s||u||n<0)return;let f=!1;if(o===e)f=c-(i+v)<=d;else{const{clientTop:m,scrollHeight:h}=e,p=me(e,l);f=v+i>=p+m+h-d}f&&t.call(a)};function k(e,t){const{containerEl:o,instance:l}=e[g],{disabled:a}=B(e,l);a||o.clientHeight===0||(o.scrollHeight<=o.clientHeight?t.call(l):q(e))}const xe={async mounted(e,t){const{instance:o,value:l}=t;Y(l)||G(g,"'v-infinite-scroll' binding value must be a function"),await S();const{delay:a,immediate:s}=B(e,o),r=ve(e,!0),u=r===window?document.documentElement:r,d=H(ye.bind(null,e,l),a);if(r){if(e[g]={instance:o,container:r,containerEl:u,delay:a,cb:l,onScroll:d,lastScrollTop:u.scrollTop},s){const i=new MutationObserver(H(k.bind(null,e,l),be));e[g].observer=i,i.observe(e,{childList:!0,subtree:!0}),k(e,l)}r.addEventListener("scroll",d)}},unmounted(e){const{container:t,onScroll:o}=e[g];t==null||t.removeEventListener("scroll",o),q(e)},async updated(e){if(!e[g])await S();else{const{containerEl:t,cb:o,observer:l}=e[g];t.clientHeight&&l&&k(e,o)}}},N=xe;N.install=e=>{e.directive("InfiniteScroll",N)};const Ce=N;function Le(e){let t;const o=b(!1),l=J({...e,originalPosition:"",originalOverflow:"",visible:!1});function a(n){l.text=n}function s(){const n=l.parent,f=v.ns;if(!n.vLoadingAddClassList){let m=n.getAttribute("loading-number");m=Number.parseInt(m)-1,m?n.setAttribute("loading-number",m.toString()):(w(n,f.bm("parent","relative")),n.removeAttribute("loading-number")),w(n,f.bm("parent","hidden"))}r(),c.unmount()}function r(){var n,f;(f=(n=v.$el)==null?void 0:n.parentNode)==null||f.removeChild(v.$el)}function u(){var n;e.beforeClose&&!e.beforeClose()||(o.value=!0,clearTimeout(t),t=window.setTimeout(d,400),l.visible=!1,(n=e.closed)==null||n.call(e))}function d(){if(!o.value)return;const n=l.parent;o.value=!1,n.vLoadingAddClassList=void 0,s()}const i=j({name:"ElLoading",setup(n,{expose:f}){const{ns:m,zIndex:h}=fe("loading");return f({ns:m,zIndex:h}),()=>{const p=l.spinner||l.svg,A=y("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",...p?{innerHTML:p}:{}},[y("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),I=l.text?y("p",{class:m.b("text")},[l.text]):void 0;return y(Q,{name:m.b("fade"),onAfterLeave:d},{default:R(()=>[T(z("div",{style:{backgroundColor:l.background||""},class:[m.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[y("div",{class:m.b("spinner")},[A,I])]),[[Z,l.visible]])])})}}}),c=W(i),v=c.mount(document.createElement("div"));return{...X(l),setText:a,removeElLoadingChild:r,close:u,handleAfterLeave:d,vm:v,get $el(){return v.$el}}}let E;const Ee=function(e={}){if(!ee)return;const t=Se(e);if(t.fullscreen&&E)return E;const o=Le({...t,closed:()=>{var a;(a=t.closed)==null||a.call(t),t.fullscreen&&(E=void 0)}});we(t,t.parent,o),D(t,t.parent,o),t.parent.vLoadingAddClassList=()=>D(t,t.parent,o);let l=t.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",t.parent.setAttribute("loading-number",l),t.parent.appendChild(o.$el),S(()=>o.visible.value=t.visible),t.fullscreen&&(E=o),o},Se=e=>{var t,o,l,a;let s;return M(e.target)?s=(t=document.querySelector(e.target))!=null?t:document.body:s=e.target||document.body,{parent:s===document.body||e.body?document.body:s,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:s===document.body&&((o=e.fullscreen)!=null?o:!0),lock:(l=e.lock)!=null?l:!1,customClass:e.customClass||"",visible:(a=e.visible)!=null?a:!0,target:s}},we=async(e,t,o)=>{const{nextZIndex:l}=o.vm.zIndex||o.vm._.exposed.zIndex,a={};if(e.fullscreen)o.originalPosition.value=x(document.body,"position"),o.originalOverflow.value=x(document.body,"overflow"),a.zIndex=l();else if(e.parent===document.body){o.originalPosition.value=x(document.body,"position"),await S();for(const s of["top","left"]){const r=s==="top"?"scrollTop":"scrollLeft";a[s]=`${e.target.getBoundingClientRect()[s]+document.body[r]+document.documentElement[r]-Number.parseInt(x(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])a[s]=`${e.target.getBoundingClientRect()[s]}px`}else o.originalPosition.value=x(t,"position");for(const[s,r]of Object.entries(a))o.$el.style[s]=r},D=(e,t,o)=>{const l=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?w(t,l.bm("parent","relative")):V(t,l.bm("parent","relative")),e.fullscreen&&e.lock?V(t,l.bm("parent","hidden")):w(t,l.bm("parent","hidden"))},P=Symbol("ElLoading"),F=(e,t)=>{var o,l,a,s;const r=t.instance,u=n=>U(t.value)?t.value[n]:void 0,d=n=>{const f=M(n)&&(r==null?void 0:r[n])||n;return f&&b(f)},i=n=>d(u(n)||e.getAttribute(`element-loading-${oe(n)}`)),c=(o=u("fullscreen"))!=null?o:t.modifiers.fullscreen,v={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:c,target:(l=u("target"))!=null?l:c?void 0:e,body:(a=u("body"))!=null?a:t.modifiers.body,lock:(s=u("lock"))!=null?s:t.modifiers.lock};e[P]={options:v,instance:Ee(v)}},Ae=(e,t)=>{for(const o of Object.keys(t))te(t[o])&&(t[o].value=e[o])},Ie={mounted(e,t){t.value&&F(e,t)},updated(e,t){const o=e[P];t.oldValue!==t.value&&(t.value&&!t.oldValue?F(e,t):t.value&&t.oldValue?U(t.value)&&Ae(t.value,o.options):o==null||o.instance.close())},unmounted(e){var t;(t=e[P])==null||t.instance.close()}};const ke={class:"albumPhoto_container"},Te={class:"albumPhoto_content"},Ne=["src"],Pe={"element-loading-text":"Loading..."},Be={key:0,class:"finished"},Ve=j({__name:"albumPhoto",setup(e){let t="https://pic.imgdb.cn/item/64c607331ddac507cc49cc9d.jpg";const o=le(),l=$(()=>Number(o.params.id)),a=$(()=>{let n=o.query.title;return o.meta.title=n,document.title=`Swhite's小窝-${n}`,n.split("")});let s=b([]),r=b({page:1,pageSize:10}),u=b();const d=async()=>{let n=await de({...r.value,id:l.value});s.value.push(...n.data.pageData),u.value=n.data.totalPage};ne(()=>{d()});let i=b(!1),c=b(!1);const v=()=>{i.value=!0,r.value.page<u.value?(r.value.page++,d()):r.value.page>=u.value&&(c.value=!0),i.value=!1};return(n,f)=>{const m=ue,h=ce,p=Ie,A=Ce;return C(),L("div",ke,[z(m,{img:_(t),titleArr:_(a)},null,8,["img","titleArr"]),O("div",Te,[T((C(),se(h,{shadow:"hover",class:"albumPhoto_elCard","infinite-scroll-disabled":_(c)},{default:R(()=>[(C(!0),L(ae,null,re(_(s),(I,K)=>(C(),L("img",{class:"albumPhotoItem_img",src:I,alt:"",key:K},null,8,Ne))),128)),T(O("div",Pe,null,512),[[p,_(i)]]),_(c)?(C(),L("div",Be,"没有更多啦 ┭┮﹏┭┮")):ie("",!0)]),_:1},8,["infinite-scroll-disabled"])),[[A,v]])])])}}});const Ke=ge(Ve,[["__scopeId","data-v-de2ddbe2"]]);export{Ke as default};
