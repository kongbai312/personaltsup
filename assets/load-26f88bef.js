import{P as pe,l as te,a0 as U,a1 as ie,au as O,d as K,v as Be,i as ee,s as V,b as C,j as B,w as P,c as I,Z as le,ab as we,C as L,f as o,aC as Se,r as D,F as R,e as N,B as Z,z as x,E as W,bn as Ne,D as ue,aw as ze,bo as qe,b8 as He,n as Ve,bp as Ke,bq as We,bi as Xe,k as re,ak as Ye,O as Ge,aD as ce,a5 as me,br as Ze,bs as Je,U as ve,aZ as Qe,ai as et,q as de,W as tt,V as nt,a7 as ot,al as ye,m as ge,I as rt,bt as at,o as st,u as it,aR as lt,ac as he,ao as G,aS as ut,bu as ct,p as dt,g as ft,a8 as pt,_ as mt}from"./index-fc725d61.js";import{E as vt}from"./el-progress-293cbd32.js";/* empty css                */import"./el-input-06fb704d.js";/* empty css               */import{a as yt,E as gt}from"./el-select-29f30bcd.js";import"./el-popper-d0e28190.js";import{r as Ce}from"./request-1c611ff6.js";import{c as ht,g as bt}from"./_commonjsHelpers-042e6b4d.js";import{i as Le}from"./index-8f6e587e.js";import{a as ae}from"./use-form-common-props-2d749c1e.js";import{c as be}from"./cloneDeep-74713355.js";import{i as _t}from"./index-98984468.js";import"./index-1018f5a7.js";import"./use-form-item-0fb50fa1.js";import"./constants-84857360.js";import"./index-e8391c90.js";import"./strings-5cd9cae5.js";import"./index-9d137895.js";import"./scroll-23a40b9a.js";import"./debounce-eddc59ba.js";import"./focus-trap-35dd4f3b.js";import"./axios-4a70c6fc.js";import"./_baseClone-51ead2db.js";import"./_Uint8Array-211c46a2.js";import"./_initCloneObject-8f67e01e.js";const Re=Symbol("uploadContextKey"),Et="ElUpload";class kt extends Error{constructor(g,i,s,b){super(g),this.name="UploadAjaxError",this.status=i,this.method=s,this.url=b}}function _e(a,g,i){let s;return i.response?s=`${i.response.error||i.response}`:i.responseText?s=`${i.responseText}`:s=`fail to ${g.method} ${a} ${i.status}`,new kt(s,i.status,g.method,a)}function Tt(a){const g=a.responseText||a.response;if(!g)return g;try{return JSON.parse(g)}catch{return g}}const wt=a=>{typeof XMLHttpRequest>"u"&&pe(Et,"XMLHttpRequest is undefined");const g=new XMLHttpRequest,i=a.action;g.upload&&g.upload.addEventListener("progress",u=>{const r=u;r.percent=u.total>0?u.loaded/u.total*100:0,a.onProgress(r)});const s=new FormData;if(a.data)for(const[u,r]of Object.entries(a.data))Array.isArray(r)?s.append(u,...r):s.append(u,r);s.append(a.filename,a.file,a.file.name),g.addEventListener("error",()=>{a.onError(_e(i,a,g))}),g.addEventListener("load",()=>{if(g.status<200||g.status>=300)return a.onError(_e(i,a,g));a.onSuccess(Tt(g))}),g.open(a.method,i,!0),a.withCredentials&&"withCredentials"in g&&(g.withCredentials=!0);const b=a.headers||{};if(b instanceof Headers)b.forEach((u,r)=>g.setRequestHeader(r,u));else for(const[u,r]of Object.entries(b))Le(r)||g.setRequestHeader(u,String(r));return g.send(s),g},Ue=["text","picture","picture-card"];let St=1;const fe=()=>Date.now()+St++,$e=te({action:{type:String,default:"#"},headers:{type:U(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>ie({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:U(Array),default:()=>ie([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Ue,default:"text"},httpRequest:{type:U(Function),default:wt},disabled:Boolean,limit:Number}),Ct=te({...$e,beforeUpload:{type:U(Function),default:O},beforeRemove:{type:U(Function)},onRemove:{type:U(Function),default:O},onChange:{type:U(Function),default:O},onPreview:{type:U(Function),default:O},onSuccess:{type:U(Function),default:O},onProgress:{type:U(Function),default:O},onError:{type:U(Function),default:O},onExceed:{type:U(Function),default:O}}),Lt=te({files:{type:U(Array),default:()=>ie([])},disabled:{type:Boolean,default:!1},handlePreview:{type:U(Function),default:O},listType:{type:String,values:Ue,default:"text"}}),Rt={remove:a=>!!a},Ut=["onKeydown"],$t=["src"],Pt=["onClick"],Ot=["onClick"],xt=["onClick"],At=K({name:"ElUploadList"}),Ft=K({...At,props:Lt,emits:Rt,setup(a,{emit:g}){const{t:i}=Be(),s=ee("upload"),b=ee("icon"),u=ee("list"),r=ae(),t=V(!1),p=l=>{g("remove",l)};return(l,h)=>(C(),B(Xe,{tag:"ul",class:L([o(s).b("list"),o(s).bm("list",l.listType),o(s).is("disabled",o(r))]),name:o(u).b()},{default:P(()=>[(C(!0),I(le,null,we(l.files,_=>(C(),I("li",{key:_.uid||_.name,class:L([o(s).be("list","item"),o(s).is(_.status),{focusing:t.value}]),tabindex:"0",onKeydown:Se(n=>!o(r)&&p(_),["delete"]),onFocus:h[0]||(h[0]=n=>t.value=!0),onBlur:h[1]||(h[1]=n=>t.value=!1),onClick:h[2]||(h[2]=n=>t.value=!1)},[D(l.$slots,"default",{file:_},()=>[l.listType==="picture"||_.status!=="uploading"&&l.listType==="picture-card"?(C(),I("img",{key:0,class:L(o(s).be("list","item-thumbnail")),src:_.url,alt:""},null,10,$t)):R("v-if",!0),_.status==="uploading"||l.listType!=="picture-card"?(C(),I("div",{key:1,class:L(o(s).be("list","item-info"))},[N("a",{class:L(o(s).be("list","item-name")),onClick:Z(n=>l.handlePreview(_),["prevent"])},[x(o(W),{class:L(o(b).m("document"))},{default:P(()=>[x(o(Ne))]),_:1},8,["class"]),N("span",{class:L(o(s).be("list","item-file-name"))},ue(_.name),3)],10,Pt),_.status==="uploading"?(C(),B(o(vt),{key:0,type:l.listType==="picture-card"?"circle":"line","stroke-width":l.listType==="picture-card"?6:2,percentage:Number(_.percentage),style:ze(l.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):R("v-if",!0)],2)):R("v-if",!0),N("label",{class:L(o(s).be("list","item-status-label"))},[l.listType==="text"?(C(),B(o(W),{key:0,class:L([o(b).m("upload-success"),o(b).m("circle-check")])},{default:P(()=>[x(o(qe))]),_:1},8,["class"])):["picture-card","picture"].includes(l.listType)?(C(),B(o(W),{key:1,class:L([o(b).m("upload-success"),o(b).m("check")])},{default:P(()=>[x(o(He))]),_:1},8,["class"])):R("v-if",!0)],2),o(r)?R("v-if",!0):(C(),B(o(W),{key:2,class:L(o(b).m("close")),onClick:n=>p(_)},{default:P(()=>[x(o(Ve))]),_:2},1032,["class","onClick"])),R(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),R(" This is a bug which needs to be fixed "),R(" TODO: Fix the incorrect navigation interaction "),o(r)?R("v-if",!0):(C(),I("i",{key:3,class:L(o(b).m("close-tip"))},ue(o(i)("el.upload.deleteTip")),3)),l.listType==="picture-card"?(C(),I("span",{key:4,class:L(o(s).be("list","item-actions"))},[N("span",{class:L(o(s).be("list","item-preview")),onClick:n=>l.handlePreview(_)},[x(o(W),{class:L(o(b).m("zoom-in"))},{default:P(()=>[x(o(Ke))]),_:1},8,["class"])],10,Ot),o(r)?R("v-if",!0):(C(),I("span",{key:0,class:L(o(s).be("list","item-delete")),onClick:n=>p(_)},[x(o(W),{class:L(o(b).m("delete"))},{default:P(()=>[x(o(We))]),_:1},8,["class"])],10,xt))],2)):R("v-if",!0)])],42,Ut))),128)),D(l.$slots,"append")]),_:3},8,["class","name"]))}});var Ee=re(Ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Dt=te({disabled:{type:Boolean,default:!1}}),It={file:a=>Ye(a)},jt=["onDrop","onDragover"],Pe="ElUploadDrag",Mt=K({name:Pe}),Bt=K({...Mt,props:Dt,emits:It,setup(a,{emit:g}){const i=Ge(Re);i||pe(Pe,"usage: <el-upload><el-upload-dragger /></el-upload>");const s=ee("upload"),b=V(!1),u=ae(),r=p=>{if(u.value)return;b.value=!1,p.stopPropagation();const l=Array.from(p.dataTransfer.files),h=i.accept.value;if(!h){g("file",l);return}const _=l.filter(n=>{const{type:f,name:e}=n,d=e.includes(".")?`.${e.split(".").pop()}`:"",y=f.replace(/\/.*$/,"");return h.split(",").map(c=>c.trim()).filter(c=>c).some(c=>c.startsWith(".")?d===c:/\/\*$/.test(c)?y===c.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(c)?f===c:!1)});g("file",_)},t=()=>{u.value||(b.value=!0)};return(p,l)=>(C(),I("div",{class:L([o(s).b("dragger"),o(s).is("dragover",b.value)]),onDrop:Z(r,["prevent"]),onDragover:Z(t,["prevent"]),onDragleave:l[0]||(l[0]=Z(h=>b.value=!1,["prevent"]))},[D(p.$slots,"default")],42,jt))}});var Nt=re(Bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const zt=te({...$e,beforeUpload:{type:U(Function),default:O},onRemove:{type:U(Function),default:O},onStart:{type:U(Function),default:O},onSuccess:{type:U(Function),default:O},onProgress:{type:U(Function),default:O},onError:{type:U(Function),default:O},onExceed:{type:U(Function),default:O}}),qt=["onKeydown"],Ht=["name","multiple","accept"],Vt=K({name:"ElUploadContent",inheritAttrs:!1}),Kt=K({...Vt,props:zt,setup(a,{expose:g}){const i=a,s=ee("upload"),b=ae(),u=ce({}),r=ce(),t=e=>{if(e.length===0)return;const{autoUpload:d,limit:y,fileList:c,multiple:j,onStart:S,onExceed:$}=i;if(y&&c.length+e.length>y){$(e,c);return}j||(e=e.slice(0,1));for(const A of e){const z=A;z.uid=fe(),S(z),d&&p(z)}},p=async e=>{if(r.value.value="",!i.beforeUpload)return l(e);let d,y={};try{const j=i.data,S=i.beforeUpload(e);y=me(i.data)?be(i.data):i.data,d=await S,me(i.data)&&_t(j,y)&&(y=be(i.data))}catch{d=!1}if(d===!1){i.onRemove(e);return}let c=e;d instanceof Blob&&(d instanceof File?c=d:c=new File([d],e.name,{type:e.type})),l(Object.assign(c,{uid:e.uid}),y)},l=(e,d)=>{const{headers:y,data:c,method:j,withCredentials:S,name:$,action:A,onProgress:z,onSuccess:X,onError:q,httpRequest:F}=i,{uid:Y}=e,J={headers:y||{},withCredentials:S,file:e,data:d??c,method:j,filename:$,action:A,onProgress:H=>{z(H,e)},onSuccess:H=>{X(H,e),delete u.value[Y]},onError:H=>{q(H,e),delete u.value[Y]}},Q=F(J);u.value[Y]=Q,Q instanceof Promise&&Q.then(J.onSuccess,J.onError)},h=e=>{const d=e.target.files;d&&t(Array.from(d))},_=()=>{b.value||(r.value.value="",r.value.click())},n=()=>{_()};return g({abort:e=>{Ze(u.value).filter(e?([y])=>String(e.uid)===y:()=>!0).forEach(([y,c])=>{c instanceof XMLHttpRequest&&c.abort(),delete u.value[y]})},upload:p}),(e,d)=>(C(),I("div",{class:L([o(s).b(),o(s).m(e.listType),o(s).is("drag",e.drag)]),tabindex:"0",onClick:_,onKeydown:Se(Z(n,["self"]),["enter","space"])},[e.drag?(C(),B(Nt,{key:0,disabled:o(b),onFile:t},{default:P(()=>[D(e.$slots,"default")]),_:3},8,["disabled"])):D(e.$slots,"default",{key:1}),N("input",{ref_key:"inputRef",ref:r,class:L(o(s).e("input")),name:e.name,multiple:e.multiple,accept:e.accept,type:"file",onChange:h,onClick:d[0]||(d[0]=Z(()=>{},["stop"]))},null,42,Ht)],42,qt))}});var ke=re(Kt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const Te="ElUpload",Wt=a=>{var g;(g=a.url)!=null&&g.startsWith("blob:")&&URL.revokeObjectURL(a.url)},Xt=(a,g)=>{const i=Je(a,"fileList",void 0,{passive:!0}),s=n=>i.value.find(f=>f.uid===n.uid);function b(n){var f;(f=g.value)==null||f.abort(n)}function u(n=["ready","uploading","success","fail"]){i.value=i.value.filter(f=>!n.includes(f.status))}const r=(n,f)=>{const e=s(f);e&&(console.error(n),e.status="fail",i.value.splice(i.value.indexOf(e),1),a.onError(n,e,i.value),a.onChange(e,i.value))},t=(n,f)=>{const e=s(f);e&&(a.onProgress(n,e,i.value),e.status="uploading",e.percentage=Math.round(n.percent))},p=(n,f)=>{const e=s(f);e&&(e.status="success",e.response=n,a.onSuccess(n,e,i.value),a.onChange(e,i.value))},l=n=>{Le(n.uid)&&(n.uid=fe());const f={name:n.name,percentage:0,status:"ready",size:n.size,raw:n,uid:n.uid};if(a.listType==="picture-card"||a.listType==="picture")try{f.url=URL.createObjectURL(n)}catch(e){Qe(Te,e.message),a.onError(e,f,i.value)}i.value=[...i.value,f],a.onChange(f,i.value)},h=async n=>{const f=n instanceof File?s(n):n;f||pe(Te,"file to be removed not found");const e=d=>{b(d);const y=i.value;y.splice(y.indexOf(d),1),a.onRemove(d,y),Wt(d)};a.beforeRemove?await a.beforeRemove(f,i.value)!==!1&&e(f):e(f)};function _(){i.value.filter(({status:n})=>n==="ready").forEach(({raw:n})=>{var f;return n&&((f=g.value)==null?void 0:f.upload(n))})}return ve(()=>a.listType,n=>{n!=="picture-card"&&n!=="picture"||(i.value=i.value.map(f=>{const{raw:e,url:d}=f;if(!d&&e)try{f.url=URL.createObjectURL(e)}catch(y){a.onError(y,f,i.value)}return f}))}),ve(i,n=>{for(const f of n)f.uid||(f.uid=fe()),f.status||(f.status="success")},{immediate:!0,deep:!0}),{uploadFiles:i,abort:b,clearFiles:u,handleError:r,handleProgress:t,handleStart:l,handleSuccess:p,handleRemove:h,submit:_}},Yt=K({name:"ElUpload"}),Gt=K({...Yt,props:Ct,setup(a,{expose:g}){const i=a,s=et(),b=ae(),u=ce(),{abort:r,submit:t,clearFiles:p,uploadFiles:l,handleStart:h,handleError:_,handleRemove:n,handleSuccess:f,handleProgress:e}=Xt(i,u),d=de(()=>i.listType==="picture-card"),y=de(()=>({...i,fileList:l.value,onStart:h,onProgress:e,onSuccess:f,onError:_,onRemove:n}));return tt(()=>{l.value.forEach(({url:c})=>{c!=null&&c.startsWith("blob:")&&URL.revokeObjectURL(c)})}),nt(Re,{accept:ot(i,"accept")}),g({abort:r,submit:t,clearFiles:p,handleStart:h,handleRemove:n}),(c,j)=>(C(),I("div",null,[o(d)&&c.showFileList?(C(),B(Ee,{key:0,disabled:o(b),"list-type":c.listType,files:o(l),"handle-preview":c.onPreview,onRemove:o(n)},ye({append:P(()=>[x(ke,ge({ref_key:"uploadRef",ref:u},o(y)),{default:P(()=>[o(s).trigger?D(c.$slots,"trigger",{key:0}):R("v-if",!0),!o(s).trigger&&o(s).default?D(c.$slots,"default",{key:1}):R("v-if",!0)]),_:3},16)]),_:2},[c.$slots.file?{name:"default",fn:P(({file:S})=>[D(c.$slots,"file",{file:S})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):R("v-if",!0),!o(d)||o(d)&&!c.showFileList?(C(),B(ke,ge({key:1,ref_key:"uploadRef",ref:u},o(y)),{default:P(()=>[o(s).trigger?D(c.$slots,"trigger",{key:0}):R("v-if",!0),!o(s).trigger&&o(s).default?D(c.$slots,"default",{key:1}):R("v-if",!0)]),_:3},16)):R("v-if",!0),c.$slots.trigger?D(c.$slots,"default",{key:2}):R("v-if",!0),D(c.$slots,"tip"),!o(d)&&c.showFileList?(C(),B(Ee,{key:3,disabled:o(b),"list-type":c.listType,files:o(l),"handle-preview":c.onPreview,onRemove:o(n)},ye({_:2},[c.$slots.file?{name:"default",fn:P(({file:S})=>[D(c.$slots,"file",{file:S})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):R("v-if",!0)]))}});var Zt=re(Gt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Jt=rt(Zt);const Oe=at("sw-test",()=>{let a=V(),g=V(0);return{uploadImgToken:a,lastUploadImgTime:g,setUploadImgToken:b=>{a.value=b},setLastUploadImgTime:b=>{g.value=b}}},{persist:{key:"sw-test",paths:["uploadImgToken","lastUploadImgTime"]}}),Qt=Oe(),en=()=>Ce({url:"http://geek.itheima.net/v1_0/authorizations",method:"post",data:{mobile:"13760176666",code:"246810"}}),tn=a=>Ce({headers:{Authorization:`Bearer ${Qt.uploadImgToken}`},url:"http://geek.itheima.net/v1_0/user/photo",method:"patch",data:a});var xe={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(a,g){(function(s,b){a.exports=b()})(ht,function(){return function(){var i={686:function(u,r,t){t.d(r,{default:function(){return Me}});var p=t(279),l=t.n(p),h=t(370),_=t.n(h),n=t(817),f=t.n(n);function e(T){try{return document.execCommand(T)}catch{return!1}}var d=function(v){var m=f()(v);return e("cut"),m},y=d;function c(T){var v=document.documentElement.getAttribute("dir")==="rtl",m=document.createElement("textarea");m.style.fontSize="12pt",m.style.border="0",m.style.padding="0",m.style.margin="0",m.style.position="absolute",m.style[v?"right":"left"]="-9999px";var E=window.pageYOffset||document.documentElement.scrollTop;return m.style.top="".concat(E,"px"),m.setAttribute("readonly",""),m.value=T,m}var j=function(v,m){var E=c(v);m.container.appendChild(E);var k=f()(E);return e("copy"),E.remove(),k},S=function(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},E="";return typeof v=="string"?E=j(v,m):v instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(v==null?void 0:v.type)?E=j(v.value,m):(E=f()(v),e("copy")),E},$=S;function A(T){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(m){return typeof m}:A=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},A(T)}var z=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=v.action,E=m===void 0?"copy":m,k=v.container,w=v.target,M=v.text;if(E!=="copy"&&E!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(w!==void 0)if(w&&A(w)==="object"&&w.nodeType===1){if(E==="copy"&&w.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(E==="cut"&&(w.hasAttribute("readonly")||w.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(M)return $(M,{container:k});if(w)return E==="cut"?y(w):$(w,{container:k})},X=z;function q(T){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(m){return typeof m}:q=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},q(T)}function F(T,v){if(!(T instanceof v))throw new TypeError("Cannot call a class as a function")}function Y(T,v){for(var m=0;m<v.length;m++){var E=v[m];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,E.key,E)}}function J(T,v,m){return v&&Y(T.prototype,v),m&&Y(T,m),T}function Q(T,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(v&&v.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),v&&H(T,v)}function H(T,v){return H=Object.setPrototypeOf||function(E,k){return E.__proto__=k,E},H(T,v)}function Ae(T){var v=Ie();return function(){var E=ne(T),k;if(v){var w=ne(this).constructor;k=Reflect.construct(E,arguments,w)}else k=E.apply(this,arguments);return Fe(this,k)}}function Fe(T,v){return v&&(q(v)==="object"||typeof v=="function")?v:De(T)}function De(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function Ie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ne(T){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},ne(T)}function se(T,v){var m="data-clipboard-".concat(T);if(v.hasAttribute(m))return v.getAttribute(m)}var je=function(T){Q(m,T);var v=Ae(m);function m(E,k){var w;return F(this,m),w=v.call(this),w.resolveOptions(k),w.listenClick(E),w}return J(m,[{key:"resolveOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof k.action=="function"?k.action:this.defaultAction,this.target=typeof k.target=="function"?k.target:this.defaultTarget,this.text=typeof k.text=="function"?k.text:this.defaultText,this.container=q(k.container)==="object"?k.container:document.body}},{key:"listenClick",value:function(k){var w=this;this.listener=_()(k,"click",function(M){return w.onClick(M)})}},{key:"onClick",value:function(k){var w=k.delegateTarget||k.currentTarget,M=this.action(w)||"copy",oe=X({action:M,container:this.container,target:this.target(w),text:this.text(w)});this.emit(oe?"success":"error",{action:M,text:oe,trigger:w,clearSelection:function(){w&&w.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(k){return se("action",k)}},{key:"defaultTarget",value:function(k){var w=se("target",k);if(w)return document.querySelector(w)}},{key:"defaultText",value:function(k){return se("text",k)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(k){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return $(k,w)}},{key:"cut",value:function(k){return y(k)}},{key:"isSupported",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],w=typeof k=="string"?[k]:k,M=!!document.queryCommandSupported;return w.forEach(function(oe){M=M&&!!document.queryCommandSupported(oe)}),M}}]),m}(l()),Me=je},828:function(u){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function p(l,h){for(;l&&l.nodeType!==r;){if(typeof l.matches=="function"&&l.matches(h))return l;l=l.parentNode}}u.exports=p},438:function(u,r,t){var p=t(828);function l(n,f,e,d,y){var c=_.apply(this,arguments);return n.addEventListener(e,c,y),{destroy:function(){n.removeEventListener(e,c,y)}}}function h(n,f,e,d,y){return typeof n.addEventListener=="function"?l.apply(null,arguments):typeof e=="function"?l.bind(null,document).apply(null,arguments):(typeof n=="string"&&(n=document.querySelectorAll(n)),Array.prototype.map.call(n,function(c){return l(c,f,e,d,y)}))}function _(n,f,e,d){return function(y){y.delegateTarget=p(y.target,f),y.delegateTarget&&d.call(n,y)}}u.exports=h},879:function(u,r){r.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},r.nodeList=function(t){var p=Object.prototype.toString.call(t);return t!==void 0&&(p==="[object NodeList]"||p==="[object HTMLCollection]")&&"length"in t&&(t.length===0||r.node(t[0]))},r.string=function(t){return typeof t=="string"||t instanceof String},r.fn=function(t){var p=Object.prototype.toString.call(t);return p==="[object Function]"}},370:function(u,r,t){var p=t(879),l=t(438);function h(e,d,y){if(!e&&!d&&!y)throw new Error("Missing required arguments");if(!p.string(d))throw new TypeError("Second argument must be a String");if(!p.fn(y))throw new TypeError("Third argument must be a Function");if(p.node(e))return _(e,d,y);if(p.nodeList(e))return n(e,d,y);if(p.string(e))return f(e,d,y);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function _(e,d,y){return e.addEventListener(d,y),{destroy:function(){e.removeEventListener(d,y)}}}function n(e,d,y){return Array.prototype.forEach.call(e,function(c){c.addEventListener(d,y)}),{destroy:function(){Array.prototype.forEach.call(e,function(c){c.removeEventListener(d,y)})}}}function f(e,d,y){return l(document.body,e,d,y)}u.exports=h},817:function(u){function r(t){var p;if(t.nodeName==="SELECT")t.focus(),p=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var l=t.hasAttribute("readonly");l||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),l||t.removeAttribute("readonly"),p=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var h=window.getSelection(),_=document.createRange();_.selectNodeContents(t),h.removeAllRanges(),h.addRange(_),p=h.toString()}return p}u.exports=r},279:function(u){function r(){}r.prototype={on:function(t,p,l){var h=this.e||(this.e={});return(h[t]||(h[t]=[])).push({fn:p,ctx:l}),this},once:function(t,p,l){var h=this;function _(){h.off(t,_),p.apply(l,arguments)}return _._=p,this.on(t,_,l)},emit:function(t){var p=[].slice.call(arguments,1),l=((this.e||(this.e={}))[t]||[]).slice(),h=0,_=l.length;for(h;h<_;h++)l[h].fn.apply(l[h].ctx,p);return this},off:function(t,p){var l=this.e||(this.e={}),h=l[t],_=[];if(h&&p)for(var n=0,f=h.length;n<f;n++)h[n].fn!==p&&h[n].fn._!==p&&_.push(h[n]);return _.length?l[t]=_:delete l[t],this}},u.exports=r,u.exports.TinyEmitter=r}},s={};function b(u){if(s[u])return s[u].exports;var r=s[u]={exports:{}};return i[u](r,r.exports,b),r.exports}return function(){b.n=function(u){var r=u&&u.__esModule?function(){return u.default}:function(){return u};return b.d(r,{a:r}),r}}(),function(){b.d=function(u,r){for(var t in r)b.o(r,t)&&!b.o(u,t)&&Object.defineProperty(u,t,{enumerable:!0,get:r[t]})}}(),function(){b.o=function(u,r){return Object.prototype.hasOwnProperty.call(u,r)}}(),b(686)}().default})})(xe);var nn=xe.exports;const on=bt(nn),rn=a=>{const g=(a==null?void 0:a.appendToBody)===void 0?!0:a.appendToBody;return{toClipboard(i,s){return new Promise((b,u)=>{const r=document.createElement("button"),t=new on(r,{text:()=>i,action:()=>"copy",container:s!==void 0?s:document.body});t.on("success",p=>{t.destroy(),b(p)}),t.on("error",p=>{t.destroy(),u(p)}),g&&document.body.appendChild(r),r.click(),g&&document.body.removeChild(r)})}}},an=a=>(dt("data-v-565f3d22"),a=a(),ft(),a),sn={class:"load_container"},ln={class:"load_btnBox"},un={class:"loadBox"},cn=an(()=>N("div",{class:"el-upload__text"},[pt(" 将文件拖动到区域"),N("em",null,"点击区域上传")],-1)),dn={class:"el-upload__tip"},fn=K({__name:"load",setup(a){const g=Oe(),i=async()=>{let S=new Date().getTime(),$=g.lastUploadImgTime;if(S-$>2*60*60*1e3){let A=await en();g.setUploadImgToken(A.data.token),g.setLastUploadImgTime(new Date().getTime())}};st(()=>{i()});let s=V("imgLoad");const b=()=>{r.value=[]};let u=V(),r=V([]),t=V();const p=V([]);let l=[{label:"头像上传",value:"imgLoad"},{label:"Excel上传",value:"excelLoad"}],h=de(()=>s.value==="imgLoad"?{text:"图片大小小于 1MB",class:"avatar_uploader",listType:"picture"}:s.value==="excelLoad"?{text:"excel文件大小小于 2MB，暂时没完成该功能，会跳转至原生写法",class:"file_uploader",listType:"text"}:{});const _=S=>{if(s.value==="imgLoad")return S.type!=="image/jpeg"&&S.type!=="image/png"?(G.error("图片必须为jpg格式或者png格式"),!1):S.size/1024/1024>1?(G.error("图片的大小不能超过1MB"),!1):(u.value=new FormData,u.value.append("photo",S),!0);s.value},n=async()=>{try{return await tn(u.value)}catch(S){return Promise.reject("上传失败:"+S)}},f=(S,$)=>{s.value==="imgLoad"?(p.value.push({uid:$.uid,url:S.data.photo}),G.success("上传成功")):s.value},e=it(),d=()=>{if(s.value==="excelLoad"){e.push("/loadnative");return}t.value.submit()},y=()=>{G.info("文件不能超过5个")},{toClipboard:c}=rn(),j=async S=>{try{let $=p.value.find(A=>A.uid===S.uid);await c($.url),G.success("已复制图片地址到剪贴板")}catch{G.error("当前浏览器不兼容")}};return lt(()=>{}),(S,$)=>{const A=gt,z=yt,X=W,q=Jt;return C(),I("div",sn,[N("div",ln,[x(z,{class:"load_select",placeholder:"上传方式",modelValue:o(s),"onUpdate:modelValue":$[0]||($[0]=F=>he(s)?s.value=F:s=F),size:"large",onChange:b},{default:P(()=>[(C(!0),I(le,null,we(o(l),F=>(C(),B(A,{key:F.value,label:F.label,value:F.value,style:{"min-height":"30px",display:"flex","align-items":"center","font-size":"14px"}},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),N("div",{class:"btn_load",onClick:d},"上传")]),N("div",un,[x(q,{ref_key:"elUploadRef",ref:t,limit:5,class:L(o(h).class),drag:"",multiple:"","file-list":o(r),"onUpdate:fileList":$[1]||($[1]=F=>he(r)?r.value=F:r=F),"list-type":"picture","before-upload":_,"on-success":f,"http-request":n,"auto-upload":!1,"on-exceed":y,"on-preview":j},{tip:P(()=>[N("div",dn,ue(o(h).text),1)]),default:P(()=>[o(s)==="imgLoad"?(C(),B(X,{key:0,class:"avatar-uploader-icon"},{default:P(()=>[x(o(ut))]),_:1})):R("",!0),o(s)==="excelLoad"?(C(),I(le,{key:1},[x(X,{class:"el-icon--upload"},{default:P(()=>[x(o(ct))]),_:1}),cn],64)):R("",!0)]),_:1},8,["class","file-list"])])])}}});const Bn=mt(fn,[["__scopeId","data-v-565f3d22"]]);export{Bn as default};
