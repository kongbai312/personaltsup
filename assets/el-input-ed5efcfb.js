import{ar as Ee,s as C,O as we,q as f,o as Pe,U as Z,a7 as Fe,aH as je,aF as xe,l as Ue,bk as We,a0 as G,N as Se,a1 as Ye,Y as ee,d as Ve,bu as Ze,ai as qe,i as Ie,aD as te,c0 as Xe,c1 as Je,c2 as Qe,a3 as Ge,a6 as F,aZ as Ce,A as et,G as tt,b as p,c as x,F as m,Z as ae,C as b,f as t,r as U,e as V,j as I,w as R,av as W,E as _,m as oe,z as at,b0 as ot,B as nt,au as st,D as Y,aw as lt,k as it,a5 as ze,I as rt}from"./index-3521c6ce.js";import{u as ut,U as ne,i as ct}from"./index-f06f5645.js";import{u as dt}from"./index-f2e6103e.js";import{f as pt,a as ft}from"./constants-84857360.js";import{u as vt,a as mt}from"./use-form-common-props-8dcded35.js";const ht=()=>Ee&&/firefox/i.test(window.navigator.userAgent),yt=o=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(o);function bt(o){const l=C();function r(){if(o.value==null)return;const{selectionStart:s,selectionEnd:u,value:d}=o.value;if(s==null||u==null)return;const y=d.slice(0,Math.max(0,s)),c=d.slice(Math.max(0,u));l.value={selectionStart:s,selectionEnd:u,value:d,beforeTxt:y,afterTxt:c}}function a(){if(o.value==null||l.value==null)return;const{value:s}=o.value,{beforeTxt:u,afterTxt:d,selectionStart:y}=l.value;if(u==null||d==null||y==null)return;let c=s.length;if(s.endsWith(d))c=s.length-d.length;else if(s.startsWith(u))c=u.length;else{const h=u[y-1],z=s.indexOf(h,y-1);z!==-1&&(c=z+1)}o.value.setSelectionRange(c,c)}return[r,a]}const gt=()=>{const o=we(pt,void 0),l=we(ft,void 0);return{form:o,formItem:l}},wt=(o,{formItemContext:l,disableIdGeneration:r,disableIdManagement:a})=>{r||(r=C(!1)),a||(a=C(!1));const s=C();let u;const d=f(()=>{var y;return!!(!o.label&&l&&l.inputIds&&((y=l.inputIds)==null?void 0:y.length)<=1)});return Pe(()=>{u=Z([Fe(o,"id"),r],([y,c])=>{const h=y??(c?void 0:ut().value);h!==s.value&&(l!=null&&l.removeInputId&&(s.value&&l.removeInputId(s.value),!(a!=null&&a.value)&&!c&&h&&l.addInputId(h)),s.value=h)},{immediate:!0})}),je(()=>{u&&u(),l!=null&&l.removeInputId&&s.value&&l.removeInputId(s.value)}),{isLabeledByFormItem:d,inputId:s}};let g;const xt=`
  height:0 !important;
  visibility:hidden !important;
  ${ht()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,St=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function It(o){const l=window.getComputedStyle(o),r=l.getPropertyValue("box-sizing"),a=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),s=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:St.map(d=>`${d}:${l.getPropertyValue(d)}`).join(";"),paddingSize:a,borderSize:s,boxSizing:r}}function ke(o,l=1,r){var a;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:s,borderSize:u,boxSizing:d,contextStyle:y}=It(o);g.setAttribute("style",`${y};${xt}`),g.value=o.value||o.placeholder||"";let c=g.scrollHeight;const h={};d==="border-box"?c=c+u:d==="content-box"&&(c=c-s),g.value="";const z=g.scrollHeight-s;if(xe(l)){let v=z*l;d==="border-box"&&(v=v+s+u),c=Math.max(v,c),h.minHeight=`${v}px`}if(xe(r)){let v=z*r;d==="border-box"&&(v=v+s+u),c=Math.min(v,c)}return h.height=`${c}px`,(a=g.parentNode)==null||a.removeChild(g),g=void 0,h}const Ct=Ue({id:{type:String,default:void 0},size:We,disabled:Boolean,modelValue:{type:G([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:G([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Se},prefixIcon:{type:Se},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:G([Object,Array,String]),default:()=>Ye({})}}),zt={[ne]:o=>ee(o),input:o=>ee(o),change:o=>ee(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},kt=["role"],Et=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Pt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Ft=Ve({name:"ElInput",inheritAttrs:!1}),Vt=Ve({...Ft,props:Ct,emits:zt,setup(o,{expose:l,emit:r}){const a=o,s=Ze(),u=qe(),d=f(()=>{const e={};return a.containerRole==="combobox"&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e}),y=f(()=>[a.type==="textarea"?le.b():n.b(),n.m(Ne.value),n.is("disabled",E.value),n.is("exceed",$e.value),{[n.b("group")]:u.prepend||u.append,[n.bm("group","append")]:u.append,[n.bm("group","prepend")]:u.prepend,[n.m("prefix")]:u.prefix||a.prefixIcon,[n.m("suffix")]:u.suffix||a.suffixIcon||a.clearable||a.showPassword,[n.bm("suffix","password-clear")]:L.value&&X.value},s.class]),c=f(()=>[n.e("wrapper"),n.is("focus",N.value)]),h=dt({excludeKeys:f(()=>Object.keys(d.value))}),{form:z,formItem:v}=gt(),{inputId:se}=wt(a,{formItemContext:v}),Ne=vt(),E=mt(),n=Ie("input"),le=Ie("textarea"),A=te(),S=te(),N=C(!1),q=C(!1),T=C(!1),M=C(!1),ie=C(),D=te(a.inputStyle),B=f(()=>A.value||S.value),re=f(()=>{var e;return(e=z==null?void 0:z.statusIcon)!=null?e:!1}),$=f(()=>(v==null?void 0:v.validateState)||""),ue=f(()=>$.value&&Xe[$.value]),Te=f(()=>M.value?Je:Qe),Be=f(()=>[s.style,a.inputStyle]),ce=f(()=>[a.inputStyle,D.value,{resize:a.resize}]),k=f(()=>ct(a.modelValue)?"":String(a.modelValue)),L=f(()=>a.clearable&&!E.value&&!a.readonly&&!!k.value&&(N.value||q.value)),X=f(()=>a.showPassword&&!E.value&&!a.readonly&&!!k.value&&(!!k.value||N.value)),P=f(()=>a.showWordLimit&&!!h.value.maxlength&&(a.type==="text"||a.type==="textarea")&&!E.value&&!a.readonly&&!a.showPassword),J=f(()=>k.value.length),$e=f(()=>!!P.value&&J.value>Number(h.value.maxlength)),He=f(()=>!!u.suffix||!!a.suffixIcon||L.value||a.showPassword||P.value||!!$.value&&re.value),[Oe,Re]=bt(A);Ge(S,e=>{if(_e(),!P.value||a.resize!=="both")return;const i=e[0],{width:w}=i.contentRect;ie.value={right:`calc(100% - ${w+15+6}px)`}});const H=()=>{const{type:e,autosize:i}=a;if(!(!Ee||e!=="textarea"||!S.value))if(i){const w=ze(i)?i.minRows:void 0,j=ze(i)?i.maxRows:void 0,ge=ke(S.value,w,j);D.value={overflowY:"hidden",...ge},F(()=>{S.value.offsetHeight,D.value=ge})}else D.value={minHeight:ke(S.value).minHeight}},_e=(e=>{let i=!1;return()=>{var w;if(i||!a.autosize)return;((w=S.value)==null?void 0:w.offsetParent)===null||(e(),i=!0)}})(H),O=()=>{const e=B.value;!e||e.value===k.value||(e.value=k.value)},Q=async e=>{Oe();let{value:i}=e.target;if(a.formatter&&(i=a.parser?a.parser(i):i,i=a.formatter(i)),!T.value){if(i===k.value){O();return}r(ne,i),r("input",i),await F(),O(),Re()}},de=e=>{r("change",e.target.value)},pe=e=>{r("compositionstart",e),T.value=!0},fe=e=>{var i;r("compositionupdate",e);const w=(i=e.target)==null?void 0:i.value,j=w[w.length-1]||"";T.value=!yt(j)},ve=e=>{r("compositionend",e),T.value&&(T.value=!1,Q(e))},Ae=()=>{M.value=!M.value,K()},K=async()=>{var e;await F(),(e=B.value)==null||e.focus()},Me=()=>{var e;return(e=B.value)==null?void 0:e.blur()},me=e=>{N.value=!0,r("focus",e)},he=e=>{var i;N.value=!1,r("blur",e),a.validateEvent&&((i=v==null?void 0:v.validate)==null||i.call(v,"blur").catch(w=>Ce()))},De=e=>{q.value=!1,r("mouseleave",e)},Le=e=>{q.value=!0,r("mouseenter",e)},ye=e=>{r("keydown",e)},Ke=()=>{var e;(e=B.value)==null||e.select()},be=()=>{r(ne,""),r("change",""),r("clear"),r("input","")};return Z(()=>a.modelValue,()=>{var e;F(()=>H()),a.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(i=>Ce()))}),Z(k,()=>O()),Z(()=>a.type,async()=>{await F(),O(),H()}),Pe(()=>{!a.formatter&&a.parser,O(),F(H)}),l({input:A,textarea:S,ref:B,textareaStyle:ce,autosize:Fe(a,"autosize"),focus:K,blur:Me,select:Ke,clear:be,resizeTextarea:H}),(e,i)=>et((p(),x("div",oe(t(d),{class:t(y),style:t(Be),role:e.containerRole,onMouseenter:Le,onMouseleave:De}),[m(" input "),e.type!=="textarea"?(p(),x(ae,{key:0},[m(" prepend slot "),e.$slots.prepend?(p(),x("div",{key:0,class:b(t(n).be("group","prepend"))},[U(e.$slots,"prepend")],2)):m("v-if",!0),V("div",{class:b(t(c))},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),x("span",{key:0,class:b(t(n).e("prefix"))},[V("span",{class:b(t(n).e("prefix-inner")),onClick:K},[U(e.$slots,"prefix"),e.prefixIcon?(p(),I(t(_),{key:0,class:b(t(n).e("icon"))},{default:R(()=>[(p(),I(W(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),V("input",oe({id:t(se),ref_key:"input",ref:A,class:t(n).e("inner")},t(h),{type:e.showPassword?M.value?"text":"password":e.type,disabled:t(E),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:a.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ve,onInput:Q,onFocus:me,onBlur:he,onChange:de,onKeydown:ye}),null,16,Et),m(" suffix slot "),t(He)?(p(),x("span",{key:1,class:b(t(n).e("suffix"))},[V("span",{class:b(t(n).e("suffix-inner")),onClick:K},[!t(L)||!t(X)||!t(P)?(p(),x(ae,{key:0},[U(e.$slots,"suffix"),e.suffixIcon?(p(),I(t(_),{key:0,class:b(t(n).e("icon"))},{default:R(()=>[(p(),I(W(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),t(L)?(p(),I(t(_),{key:1,class:b([t(n).e("icon"),t(n).e("clear")]),onMousedown:nt(t(st),["prevent"]),onClick:be},{default:R(()=>[at(t(ot))]),_:1},8,["class","onMousedown"])):m("v-if",!0),t(X)?(p(),I(t(_),{key:2,class:b([t(n).e("icon"),t(n).e("password")]),onClick:Ae},{default:R(()=>[(p(),I(W(t(Te))))]),_:1},8,["class"])):m("v-if",!0),t(P)?(p(),x("span",{key:3,class:b(t(n).e("count"))},[V("span",{class:b(t(n).e("count-inner"))},Y(t(J))+" / "+Y(t(h).maxlength),3)],2)):m("v-if",!0),t($)&&t(ue)&&t(re)?(p(),I(t(_),{key:4,class:b([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t($)==="validating")])},{default:R(()=>[(p(),I(W(t(ue))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(p(),x("div",{key:1,class:b(t(n).be("group","append"))},[U(e.$slots,"append")],2)):m("v-if",!0)],64)):(p(),x(ae,{key:1},[m(" textarea "),V("textarea",oe({id:t(se),ref_key:"textarea",ref:S,class:t(le).e("inner")},t(h),{tabindex:e.tabindex,disabled:t(E),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ce),"aria-label":e.label,placeholder:e.placeholder,form:a.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ve,onInput:Q,onFocus:me,onBlur:he,onChange:de,onKeydown:ye}),null,16,Pt),t(P)?(p(),x("span",{key:0,style:lt(ie.value),class:b(t(n).e("count"))},Y(t(J))+" / "+Y(t(h).maxlength),7)):m("v-if",!0)],64))],16,kt)),[[tt,e.type!=="hidden"]])}});var Nt=it(Vt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const _t=rt(Nt);export{_t as E,wt as a,yt as i,gt as u};
