import{l as ie,aF as Se,s as w,q as P,f as e,U as F,aD as Ee,o as ue,a3 as Ne,W as Me,V as Te,Y as $e,h as ce,d as Z,i as fe,b as $,c as V,e as G,j as se,w as K,A as q,C as A,B as U,z as Y,E as oe,aG as Ae,G as X,T as ne,F as W,R as Be,r as ve,aw as me,Z as He,ab as Le,D as Oe,k as de,O as Pe,S as Ve,aH as Re,aI as ze,I as De,a9 as Fe}from"./index-3521c6ce.js";import{u as Ue}from"./index-a1b956b9.js";import{t as re}from"./throttle-486697d8.js";const We=ie({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),je={change:(o,B)=>[o,B].every(Se)},he=Symbol("carouselContextKey"),le=300,Ge=(o,B,i)=>{const{children:n,addChild:k,removeChild:p}=Ue(ce(),"ElCarouselItem"),r=w(-1),d=w(null),g=w(!1),y=w(),I=w(0),S=P(()=>o.arrow!=="never"&&!e(m)),N=P(()=>n.value.some(t=>t.props.label.toString().length>0)),b=P(()=>o.type==="card"),m=P(()=>o.direction==="vertical"),H=P(()=>o.height!=="auto"?{height:o.height}:{height:`${I.value}px`,overflow:"hidden"}),_=re(t=>{s(t)},le,{trailing:!0}),E=re(t=>{R(t)},le);function M(){d.value&&(clearInterval(d.value),d.value=null)}function L(){o.interval<=0||!o.autoplay||d.value||(d.value=setInterval(()=>l(),o.interval))}const l=()=>{r.value<n.value.length-1?r.value=r.value+1:o.loop&&(r.value=0)};function s(t){if($e(t)){const z=n.value.filter(j=>j.props.name===t);z.length>0&&(t=n.value.indexOf(z[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const v=n.value.length,T=r.value;t<0?r.value=o.loop?v-1:0:t>=v?r.value=o.loop?0:v-1:r.value=t,T===r.value&&f(T),x()}function f(t){n.value.forEach((v,T)=>{v.translateItem(T,r.value,t)})}function a(t,v){var T,z,j,ee;const D=e(n),te=D.length;if(te===0||!t.states.inStage)return!1;const Ie=v+1,Ce=v-1,ae=te-1,we=D[ae].states.active,be=D[0].states.active,ke=(z=(T=D[Ie])==null?void 0:T.states)==null?void 0:z.active,_e=(ee=(j=D[Ce])==null?void 0:j.states)==null?void 0:ee.active;return v===ae&&be||ke?"left":v===0&&we||_e?"right":!1}function C(){g.value=!0,o.pauseOnHover&&M()}function O(){g.value=!1,L()}function u(t){e(m)||n.value.forEach((v,T)=>{t===a(v,T)&&(v.states.hover=!0)})}function c(){e(m)||n.value.forEach(t=>{t.states.hover=!1})}function h(t){r.value=t}function R(t){o.trigger==="hover"&&t!==r.value&&(r.value=t)}function J(){s(r.value-1)}function ge(){s(r.value+1)}function x(){M(),L()}function ye(t){o.height==="auto"&&(I.value=t)}F(()=>r.value,(t,v)=>{f(v),v>-1&&B("change",t,v)}),F(()=>o.autoplay,t=>{t?L():M()}),F(()=>o.loop,()=>{s(r.value)}),F(()=>o.interval,()=>{x()}),F(()=>n.value,()=>{n.value.length>0&&s(o.initialIndex)});const Q=Ee();return ue(()=>{Q.value=Ne(y.value,()=>{f()}),L()}),Me(()=>{M(),y.value&&Q.value&&Q.value.stop()}),Te(he,{root:y,isCardType:b,isVertical:m,items:n,loop:o.loop,addItem:k,removeItem:p,setActiveItem:s,setContainerHeight:ye}),{root:y,activeIndex:r,arrowDisplay:S,hasLabel:N,hover:g,isCardType:b,items:n,isVertical:m,containerStyle:H,handleButtonEnter:u,handleButtonLeave:c,handleIndicatorClick:h,handleMouseEnter:C,handleMouseLeave:O,setActiveItem:s,prev:J,next:ge,throttledArrowClick:_,throttledIndicatorHover:E}},Ke=["onMouseenter","onClick"],Ye={key:0},qe="ElCarousel",Xe=Z({name:qe}),Ze=Z({...Xe,props:We,emits:je,setup(o,{expose:B,emit:i}){const n=o,{root:k,activeIndex:p,arrowDisplay:r,hasLabel:d,hover:g,isCardType:y,items:I,isVertical:S,containerStyle:N,handleButtonEnter:b,handleButtonLeave:m,handleIndicatorClick:H,handleMouseEnter:_,handleMouseLeave:E,setActiveItem:M,prev:L,next:l,throttledArrowClick:s,throttledIndicatorHover:f}=Ge(n,i),a=fe("carousel"),C=P(()=>{const u=[a.b(),a.m(n.direction)];return e(y)&&u.push(a.m("card")),u}),O=P(()=>{const u=[a.e("indicators"),a.em("indicators",n.direction)];return e(d)&&u.push(a.em("indicators","labels")),n.indicatorPosition==="outside"&&u.push(a.em("indicators","outside")),e(S)&&u.push(a.em("indicators","right")),u});return B({setActiveItem:M,prev:L,next:l}),(u,c)=>($(),V("div",{ref_key:"root",ref:k,class:A(e(C)),onMouseenter:c[6]||(c[6]=U((...h)=>e(_)&&e(_)(...h),["stop"])),onMouseleave:c[7]||(c[7]=U((...h)=>e(E)&&e(E)(...h),["stop"]))},[G("div",{class:A(e(a).e("container")),style:me(e(N))},[e(r)?($(),se(ne,{key:0,name:"carousel-arrow-left",persisted:""},{default:K(()=>[q(G("button",{type:"button",class:A([e(a).e("arrow"),e(a).em("arrow","left")]),onMouseenter:c[0]||(c[0]=h=>e(b)("left")),onMouseleave:c[1]||(c[1]=(...h)=>e(m)&&e(m)(...h)),onClick:c[2]||(c[2]=U(h=>e(s)(e(p)-1),["stop"]))},[Y(e(oe),null,{default:K(()=>[Y(e(Ae))]),_:1})],34),[[X,(u.arrow==="always"||e(g))&&(n.loop||e(p)>0)]])]),_:1})):W("v-if",!0),e(r)?($(),se(ne,{key:1,name:"carousel-arrow-right",persisted:""},{default:K(()=>[q(G("button",{type:"button",class:A([e(a).e("arrow"),e(a).em("arrow","right")]),onMouseenter:c[3]||(c[3]=h=>e(b)("right")),onMouseleave:c[4]||(c[4]=(...h)=>e(m)&&e(m)(...h)),onClick:c[5]||(c[5]=U(h=>e(s)(e(p)+1),["stop"]))},[Y(e(oe),null,{default:K(()=>[Y(e(Be))]),_:1})],34),[[X,(u.arrow==="always"||e(g))&&(n.loop||e(p)<e(I).length-1)]])]),_:1})):W("v-if",!0),ve(u.$slots,"default")],6),u.indicatorPosition!=="none"?($(),V("ul",{key:0,class:A(e(O))},[($(!0),V(He,null,Le(e(I),(h,R)=>($(),V("li",{key:R,class:A([e(a).e("indicator"),e(a).em("indicator",u.direction),e(a).is("active",R===e(p))]),onMouseenter:J=>e(f)(R),onClick:U(J=>e(H)(R),["stop"])},[G("button",{class:A(e(a).e("button"))},[e(d)?($(),V("span",Ye,Oe(h.props.label),1)):W("v-if",!0)],2)],42,Ke))),128))],2)):W("v-if",!0)],34))}});var Je=de(Ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const Qe=ie({name:{type:String,default:""},label:{type:[String,Number],default:""}}),xe=(o,B)=>{const i=Pe(he),n=ce(),k=.83,p=w(),r=w(!1),d=w(0),g=w(1),y=w(!1),I=w(!1),S=w(!1),N=w(!1),{isCardType:b,isVertical:m}=i;function H(l,s,f){const a=f-1,C=s-1,O=s+1,u=f/2;return s===0&&l===a?-1:s===a&&l===0?f:l<C&&s-l>=u?f+1:l>O&&l-s>=u?-2:l}function _(l,s){var f,a;const C=e(m)?((f=i.root.value)==null?void 0:f.offsetHeight)||0:((a=i.root.value)==null?void 0:a.offsetWidth)||0;return S.value?C*((2-k)*(l-s)+1)/4:l<s?-(1+k)*C/4:(3+k)*C/4}function E(l,s,f){const a=i.root.value;return a?((f?a.offsetHeight:a.offsetWidth)||0)*(l-s):0}const M=(l,s,f)=>{var a;const C=e(b),O=(a=i.items.value.length)!=null?a:Number.NaN,u=l===s;!C&&!ze(f)&&(N.value=u||l===f),!u&&O>2&&i.loop&&(l=H(l,s,O));const c=e(m);y.value=u,C?(S.value=Math.round(Math.abs(l-s))<=1,d.value=_(l,s),g.value=e(y)?1:k):d.value=E(l,s,c),I.value=!0,u&&p.value&&i.setContainerHeight(p.value.offsetHeight)};function L(){if(i&&e(b)){const l=i.items.value.findIndex(({uid:s})=>s===n.uid);i.setActiveItem(l)}}return ue(()=>{i.addItem({props:o,states:Ve({hover:r,translate:d,scale:g,active:y,ready:I,inStage:S,animating:N}),uid:n.uid,translateItem:M})}),Re(()=>{i.removeItem(n.uid)}),{carouselItemRef:p,active:y,animating:N,hover:r,inStage:S,isVertical:m,translate:d,isCardType:b,scale:g,ready:I,handleItemClick:L}},et=Z({name:"ElCarouselItem"}),tt=Z({...et,props:Qe,setup(o){const B=o,i=fe("carousel"),{carouselItemRef:n,active:k,animating:p,hover:r,inStage:d,isVertical:g,translate:y,isCardType:I,scale:S,ready:N,handleItemClick:b}=xe(B),m=P(()=>{const _=`${`translate${e(g)?"Y":"X"}`}(${e(y)}px)`,E=`scale(${e(S)})`;return{transform:[_,E].join(" ")}});return(H,_)=>q(($(),V("div",{ref_key:"carouselItemRef",ref:n,class:A([e(i).e("item"),e(i).is("active",e(k)),e(i).is("in-stage",e(d)),e(i).is("hover",e(r)),e(i).is("animating",e(p)),{[e(i).em("item","card")]:e(I),[e(i).em("item","card-vertical")]:e(I)&&e(g)}]),style:me(e(m)),onClick:_[0]||(_[0]=(...E)=>e(b)&&e(b)(...E))},[e(I)?q(($(),V("div",{key:0,class:A(e(i).e("mask"))},null,2)),[[X,!e(k)]]):W("v-if",!0),ve(H.$slots,"default")],6)),[[X,e(N)]])}});var pe=de(tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const nt=De(Je,{CarouselItem:pe}),rt=Fe(pe);export{nt as E,rt as a};
