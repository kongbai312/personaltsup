import{j as ie,aK as Se,n as w,l as O,f as e,R as W,aH as Ee,o as ue,a2 as Ne,U as Me,S as Te,W as $e,Y as ce,d as q,h as ve,b as $,c as V,e as F,i as se,w as X,y as G,A,z as U,x as Y,E as oe,aT as Ae,D as Q,T as ne,C as j,P as Be,r as fe,av as me,X as He,aa as Le,B as Pe,_ as de,M as Oe,Q as Ve,aV as Re,aW as ze,G as De,a8 as We}from"./index-382c556c.js";import{u as Ue}from"./index-d7dee651.js";import{t as re}from"./throttle-e934e5e8.js";const je=ie({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Ke={change:(o,B)=>[o,B].every(Se)},he=Symbol("carouselContextKey"),le=300,Fe=(o,B,i)=>{const{children:n,addChild:k,removeChild:p}=Ue(ce(),"ElCarouselItem"),r=w(-1),d=w(null),y=w(!1),g=w(),I=w(0),S=O(()=>o.arrow!=="never"&&!e(m)),N=O(()=>n.value.some(t=>t.props.label.toString().length>0)),b=O(()=>o.type==="card"),m=O(()=>o.direction==="vertical"),H=O(()=>o.height!=="auto"?{height:o.height}:{height:`${I.value}px`,overflow:"hidden"}),_=re(t=>{s(t)},le,{trailing:!0}),E=re(t=>{R(t)},le);function M(){d.value&&(clearInterval(d.value),d.value=null)}function L(){o.interval<=0||!o.autoplay||d.value||(d.value=setInterval(()=>l(),o.interval))}const l=()=>{r.value<n.value.length-1?r.value=r.value+1:o.loop&&(r.value=0)};function s(t){if($e(t)){const z=n.value.filter(K=>K.props.name===t);z.length>0&&(t=n.value.indexOf(z[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const f=n.value.length,T=r.value;t<0?r.value=o.loop?f-1:0:t>=f?r.value=o.loop?0:f-1:r.value=t,T===r.value&&v(T),x()}function v(t){n.value.forEach((f,T)=>{f.translateItem(T,r.value,t)})}function a(t,f){var T,z,K,ee;const D=e(n),te=D.length;if(te===0||!t.states.inStage)return!1;const Ie=f+1,Ce=f-1,ae=te-1,we=D[ae].states.active,be=D[0].states.active,ke=(z=(T=D[Ie])==null?void 0:T.states)==null?void 0:z.active,_e=(ee=(K=D[Ce])==null?void 0:K.states)==null?void 0:ee.active;return f===ae&&be||ke?"left":f===0&&we||_e?"right":!1}function C(){y.value=!0,o.pauseOnHover&&M()}function P(){y.value=!1,L()}function u(t){e(m)||n.value.forEach((f,T)=>{t===a(f,T)&&(f.states.hover=!0)})}function c(){e(m)||n.value.forEach(t=>{t.states.hover=!1})}function h(t){r.value=t}function R(t){o.trigger==="hover"&&t!==r.value&&(r.value=t)}function J(){s(r.value-1)}function ye(){s(r.value+1)}function x(){M(),L()}function ge(t){o.height==="auto"&&(I.value=t)}W(()=>r.value,(t,f)=>{v(f),f>-1&&B("change",t,f)}),W(()=>o.autoplay,t=>{t?L():M()}),W(()=>o.loop,()=>{s(r.value)}),W(()=>o.interval,()=>{x()}),W(()=>n.value,()=>{n.value.length>0&&s(o.initialIndex)});const Z=Ee();return ue(()=>{Z.value=Ne(g.value,()=>{v()}),L()}),Me(()=>{M(),g.value&&Z.value&&Z.value.stop()}),Te(he,{root:g,isCardType:b,isVertical:m,items:n,loop:o.loop,addItem:k,removeItem:p,setActiveItem:s,setContainerHeight:ge}),{root:g,activeIndex:r,arrowDisplay:S,hasLabel:N,hover:y,isCardType:b,items:n,isVertical:m,containerStyle:H,handleButtonEnter:u,handleButtonLeave:c,handleIndicatorClick:h,handleMouseEnter:C,handleMouseLeave:P,setActiveItem:s,prev:J,next:ye,throttledArrowClick:_,throttledIndicatorHover:E}},Xe=["onMouseenter","onClick"],Ye={key:0},Ge="ElCarousel",Qe=q({name:Ge}),qe=q({...Qe,props:je,emits:Ke,setup(o,{expose:B,emit:i}){const n=o,{root:k,activeIndex:p,arrowDisplay:r,hasLabel:d,hover:y,isCardType:g,items:I,isVertical:S,containerStyle:N,handleButtonEnter:b,handleButtonLeave:m,handleIndicatorClick:H,handleMouseEnter:_,handleMouseLeave:E,setActiveItem:M,prev:L,next:l,throttledArrowClick:s,throttledIndicatorHover:v}=Fe(n,i),a=ve("carousel"),C=O(()=>{const u=[a.b(),a.m(n.direction)];return e(g)&&u.push(a.m("card")),u}),P=O(()=>{const u=[a.e("indicators"),a.em("indicators",n.direction)];return e(d)&&u.push(a.em("indicators","labels")),n.indicatorPosition==="outside"&&u.push(a.em("indicators","outside")),e(S)&&u.push(a.em("indicators","right")),u});return B({setActiveItem:M,prev:L,next:l}),(u,c)=>($(),V("div",{ref_key:"root",ref:k,class:A(e(C)),onMouseenter:c[6]||(c[6]=U((...h)=>e(_)&&e(_)(...h),["stop"])),onMouseleave:c[7]||(c[7]=U((...h)=>e(E)&&e(E)(...h),["stop"]))},[F("div",{class:A(e(a).e("container")),style:me(e(N))},[e(r)?($(),se(ne,{key:0,name:"carousel-arrow-left",persisted:""},{default:X(()=>[G(F("button",{type:"button",class:A([e(a).e("arrow"),e(a).em("arrow","left")]),onMouseenter:c[0]||(c[0]=h=>e(b)("left")),onMouseleave:c[1]||(c[1]=(...h)=>e(m)&&e(m)(...h)),onClick:c[2]||(c[2]=U(h=>e(s)(e(p)-1),["stop"]))},[Y(e(oe),null,{default:X(()=>[Y(e(Ae))]),_:1})],34),[[Q,(u.arrow==="always"||e(y))&&(n.loop||e(p)>0)]])]),_:1})):j("v-if",!0),e(r)?($(),se(ne,{key:1,name:"carousel-arrow-right",persisted:""},{default:X(()=>[G(F("button",{type:"button",class:A([e(a).e("arrow"),e(a).em("arrow","right")]),onMouseenter:c[3]||(c[3]=h=>e(b)("right")),onMouseleave:c[4]||(c[4]=(...h)=>e(m)&&e(m)(...h)),onClick:c[5]||(c[5]=U(h=>e(s)(e(p)+1),["stop"]))},[Y(e(oe),null,{default:X(()=>[Y(e(Be))]),_:1})],34),[[Q,(u.arrow==="always"||e(y))&&(n.loop||e(p)<e(I).length-1)]])]),_:1})):j("v-if",!0),fe(u.$slots,"default")],6),u.indicatorPosition!=="none"?($(),V("ul",{key:0,class:A(e(P))},[($(!0),V(He,null,Le(e(I),(h,R)=>($(),V("li",{key:R,class:A([e(a).e("indicator"),e(a).em("indicator",u.direction),e(a).is("active",R===e(p))]),onMouseenter:J=>e(v)(R),onClick:U(J=>e(H)(R),["stop"])},[F("button",{class:A(e(a).e("button"))},[e(d)?($(),V("span",Ye,Pe(h.props.label),1)):j("v-if",!0)],2)],42,Xe))),128))],2)):j("v-if",!0)],34))}});var Je=de(qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const Ze=ie({name:{type:String,default:""},label:{type:[String,Number],default:""}}),xe=(o,B)=>{const i=Oe(he),n=ce(),k=.83,p=w(),r=w(!1),d=w(0),y=w(1),g=w(!1),I=w(!1),S=w(!1),N=w(!1),{isCardType:b,isVertical:m}=i;function H(l,s,v){const a=v-1,C=s-1,P=s+1,u=v/2;return s===0&&l===a?-1:s===a&&l===0?v:l<C&&s-l>=u?v+1:l>P&&l-s>=u?-2:l}function _(l,s){var v,a;const C=e(m)?((v=i.root.value)==null?void 0:v.offsetHeight)||0:((a=i.root.value)==null?void 0:a.offsetWidth)||0;return S.value?C*((2-k)*(l-s)+1)/4:l<s?-(1+k)*C/4:(3+k)*C/4}function E(l,s,v){const a=i.root.value;return a?((v?a.offsetHeight:a.offsetWidth)||0)*(l-s):0}const M=(l,s,v)=>{var a;const C=e(b),P=(a=i.items.value.length)!=null?a:Number.NaN,u=l===s;!C&&!ze(v)&&(N.value=u||l===v),!u&&P>2&&i.loop&&(l=H(l,s,P));const c=e(m);g.value=u,C?(S.value=Math.round(Math.abs(l-s))<=1,d.value=_(l,s),y.value=e(g)?1:k):d.value=E(l,s,c),I.value=!0,u&&p.value&&i.setContainerHeight(p.value.offsetHeight)};function L(){if(i&&e(b)){const l=i.items.value.findIndex(({uid:s})=>s===n.uid);i.setActiveItem(l)}}return ue(()=>{i.addItem({props:o,states:Ve({hover:r,translate:d,scale:y,active:g,ready:I,inStage:S,animating:N}),uid:n.uid,translateItem:M})}),Re(()=>{i.removeItem(n.uid)}),{carouselItemRef:p,active:g,animating:N,hover:r,inStage:S,isVertical:m,translate:d,isCardType:b,scale:y,ready:I,handleItemClick:L}},et=q({name:"ElCarouselItem"}),tt=q({...et,props:Ze,setup(o){const B=o,i=ve("carousel"),{carouselItemRef:n,active:k,animating:p,hover:r,inStage:d,isVertical:y,translate:g,isCardType:I,scale:S,ready:N,handleItemClick:b}=xe(B),m=O(()=>{const _=`${`translate${e(y)?"Y":"X"}`}(${e(g)}px)`,E=`scale(${e(S)})`;return{transform:[_,E].join(" ")}});return(H,_)=>G(($(),V("div",{ref_key:"carouselItemRef",ref:n,class:A([e(i).e("item"),e(i).is("active",e(k)),e(i).is("in-stage",e(d)),e(i).is("hover",e(r)),e(i).is("animating",e(p)),{[e(i).em("item","card")]:e(I),[e(i).em("item","card-vertical")]:e(I)&&e(y)}]),style:me(e(m)),onClick:_[0]||(_[0]=(...E)=>e(b)&&e(b)(...E))},[e(I)?G(($(),V("div",{key:0,class:A(e(i).e("mask"))},null,2)),[[Q,!e(k)]]):j("v-if",!0),fe(H.$slots,"default")],6)),[[Q,e(N)]])}});var pe=de(tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const nt=De(Je,{CarouselItem:pe}),rt=We(pe);export{nt as E,rt as a};
